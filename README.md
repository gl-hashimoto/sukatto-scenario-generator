# ⚡ スカッと系ショート漫画シナリオ生成ツール

愛カツメディア向けの、スカッと系ショート漫画シナリオを自動生成するツールです。
体験談を入力すると、前編5ページ・後編5ページの完結形式のシナリオを生成します。

## 🌟 特徴

### コア機能
- **体験談ベースの生成**: ユーザーの生の体験談を分析し、スカッと系のシナリオに変換
- **前後編2話完結形式**: 前編5P・後編5Pでそれぞれ完結しつつ、後編を絶対に読みたくなる構造
- **10種類の落ちのパターン**: 体験談に最も適した落ちのパターンを自動選定
- **自動品質チェック**: 生成されたシナリオを自動でチェックし、リライトして品質向上
- **恋愛関連に限定**: 広義の「恋愛」にまつわる話（夫婦、カップル、義家族との関係、婚活など）

### 落ちのパターン（10種類）
1. **主人公の逆転一言型**: 我慢の限界を超えた痛快な一言
2. **証拠・事実突きつけ型**: ヘイト役の嘘や矛盾を暴く証拠
3. **第三者の登場で社会的制裁型**: 権威ある第三者の叱責・断罪
4. **因果応報・自業自得型**: ヘイト役が自分の行いで自滅
5. **立場逆転型**: 力関係が完全に逆転
6. **別れ・縁切り宣言型**: 毅然とした態度で関係を断ち切る
7. **味方の存在・孤立させ型**: ヘイト役が孤立する
8. **本性バレ・周囲の目が変わる型**: 本当の姿がバレて評価が一変
9. **冷静な対応で相手が自爆型**: 冷静な対応でヘイト役が暴走
10. **予想外の展開・どんでん返し型**: 意外な展開で痛快な結末

### その他の機能
- **履歴管理機能**: 過去の生成結果を自動保存
- **お気に入り機能**: 気に入ったシナリオをブックマーク
- **検索機能**: 体験談や内容で履歴を検索
- **編集機能**: 生成されたシナリオを直接編集
- **ダウンロード機能**: テキスト/Markdown形式でエクスポート
- **統計情報**: 総生成数、お気に入り数を表示

## 📋 必要なもの

1. **Python 3.8以上**
2. **Anthropic API Key**: [Anthropicコンソール](https://console.anthropic.com/)で取得

## 🚀 セットアップ方法

### 1. 依存パッケージのインストール

```bash
pip install -r requirements.txt
```

### 2. APIキーの設定

**方法1: アプリ内で保存（推奨）**

1. アプリを起動
2. サイドバーのAPI Key入力欄にキーを入力
3. 「💾 APIキーを保存」ボタンをクリック
4. 次回起動時から自動的に読み込まれます

**方法2: 手動で.envファイルを作成**

プロジェクトルートに`.env`ファイルを作成し、APIキーを設定します：

```
ANTHROPIC_API_KEY=sk-ant-api03-...あなたのAPIキー...
```

### 3. アプリの起動

**方法1: 起動スクリプトを使う（推奨）**

```bash
./start.sh
```

**方法2: 直接起動**

```bash
streamlit run app.py --server.port 8510
```

ブラウザが自動で開き、`http://localhost:8510`でアプリが起動します。

**注意**: このツールはポート8510を使用します（他のツールと重複しないため）。

## 📖 使い方

### 基本的な使い方

1. **サイドバーで設定**
   - APIキーを入力（.envに設定していない場合）
   - 💾 APIキーを保存ボタンで保存すると次回から自動入力されます
   - 統計情報を確認（総生成数、お気に入り数など）

2. **体験談を入力**
   - シナリオ化したい体験談を自由に記述
   - 具体的であればあるほど良いシナリオが生成されます
   - 恋愛関連の体験談である必要があります

3. **「シナリオを生成する」ボタンをクリック**
   - 進捗バーで生成過程を確認
   - 約1〜2分でシナリオが生成されます
   - 自動で品質チェックとリライトが実行されます

4. **結果の活用**
   - 画面上で確認
   - ✏️ シナリオを編集（編集機能を使用）
   - ⭐ お気に入りに追加
   - 📄 テキスト/Markdown形式でダウンロード
   - 📚 履歴から過去のシナリオを確認・検索

### 体験談の例

#### 家族関係
- 夫にモラハラされていた私が、ある日親友の一言で離婚を決意
- 義母に理不尽な要求をされ続けていたが、ついに反撃した
- 義父が私のことを嫌っていると分かった瞬間

#### 恋愛・婚活
- 婚活パーティーで出会った男性が、実は...
- 浮気をしていた彼氏を証拠で追い詰めた
- 別れを切り出したら、逆にモテ始めた

#### 職場・人間関係
- パワハラ上司に録音で反撃した
- 理不尽な同僚が、実は...
- 昇進して立場が逆転した瞬間

## 📁 ファイル構成

```
sukatto-scenario-generator/
├── app.py                          # メインアプリケーション
├── start.sh                        # 起動スクリプト（ポート8510）
├── requirements.txt                # 依存パッケージ
├── .env                            # APIキー保存先（自動生成、Gitには含まれない）
├── README.md                       # このファイル
├── prompts/
│   └── スカッと系ショート漫画シナリオ生成プロンプト.md  # シナリオ生成用プロンプト
└── output/                         # 生成履歴の保存先
    ├── scenario_YYYYMMDD_HHMMSS.json  # 生成履歴
    └── favorites.json                  # お気に入りリスト（自動生成）
```

## 🎯 生成されるシナリオの内容

1. **体験談の分析**: 核となる感情、共感ポイント、スカッとポイント
2. **落ちのパターン選定**: 前編用と後編用でそれぞれ選定
3. **登場人物**: 主人公、ヘイト役、その他の設定
4. **シナリオプロット**: 前編5P・後編5Pの詳細な脚本

### 前編の構成（5ページ）
- P1: 状況設定・日常の描写
- P2: 抑圧・理不尽の始まり
- P3: 抑圧のエスカレート・我慢の限界
- P4: 決定的な出来事・逆転のきっかけ
- P5: **小さなスカッと**・一区切りの解決

### 後編の構成（5ページ）
- P1: 前編の続き・状況の確認
- P2: 新たな問題・緊張の高まり
- P3: クライマックスへの助走
- P4: **大きなスカッと**・決定的な反撃
- P5: 解決・エピローグ・希望

## 💡 効果的なシナリオ生成のコツ

### 体験談入力のポイント
- **具体的に書く**: 「夫にモラハラされた」より「夫が毎日私の料理を否定し続けていた」
- **感情を入れる**: 悔しさ、悲しみ、怒り、孤独感など
- **状況を明確に**: 場所、関係性、きっかけなど
- **スカッとポイントを意識**: どのような反撃や解決があったか

### バリエーションを増やすには
- 同じ体験談でも、落ちのパターンを変える
- 主人公の性格や立場を変える
- ヘイト役の背景を変える

## 🔧 トラブルシューティング

### APIキーエラーが出る
- APIキーが正しいか確認
- [Anthropicコンソール](https://console.anthropic.com/)でクレジットがあるか確認

### 生成が遅い/止まる
- インターネット接続を確認
- 複雑すぎる体験談の場合、もう少しシンプルに
- APIの使用制限を確認

### 履歴が表示されない
- `output/`フォルダが存在するか確認
- サイドバーの「履歴を更新」ボタンをクリック

### ポート8510が既に使用されている
- 他のアプリケーションがポート8510を使用している場合、`start.sh`のポート番号を変更してください
- 例：`--server.port 8511`に変更

## 📊 プロンプトの特徴

このツールは、以下の要素を重視したプロンプト設計になっています：

1. **感情の抽出と増幅**: 体験談の中心にある最も強い感情を特定
2. **役割の明確化**: 主人公、ヘイト役、第三者の役割を明確に
3. **構成の再構築**: 起承転結を意識した前後編構成
4. **ヘイト役の行動に理由を持たせる**: 単なる「悪い人」ではなく、背景を暗示
5. **前編の完結性**: 前編だけでも「スカッとした！」と感じられる構成

## 📞 サポート

質問や要望がありましたら、愛カツ編集部までお問い合わせください。

## 📝 ライセンス

このツールは愛カツメディア専用です。

---

**Happy Scenario Writing! ⚡**

